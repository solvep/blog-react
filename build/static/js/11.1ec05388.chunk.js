(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{358:function(e,a,t){},576:function(e,a,t){"use strict";t.r(a);t(49);var n=t(28),s=t.n(n),i=(t(114),t(33)),l=t.n(i),o=(t(82),t(8)),c=t.n(o),h=t(57),r=(t(65),t(13)),m=t.n(r),d=t(19),g=t(20),p=t(22),u=t(21),y=t(23),b=t(7),f=(t(358),t(1)),v=t.n(f),w=t(35),C=t(36),O=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(p.a)(this,Object(u.a)(a).call(this,e))).state={isLoading:!1,email:"",phone:"",name:"",content:"",cacheTime:0,times:0},t.handleChange=t.handleChange.bind(Object(b.a)(Object(b.a)(t))),t.handleOk=t.handleOk.bind(Object(b.a)(Object(b.a)(t))),t}return Object(y.a)(a,e),Object(g.a)(a,[{key:"addMessage",value:function(e){var a=this,t=e.email,n=e.name,s=e.phone,i=e.content;if(this.state.times>3)m.a.warning("\u60a8\u4eca\u5929\u7559\u8a00\u7684\u6b21\u6570\u5df2\u7ecf\u7528\u5b8c\uff0c\u660e\u5929\u518d\u6765\u7559\u8a00\u5427\uff01",1);else{var l=(new Date).getTime();l-this.state.cacheTime<6e4?m.a.warning("\u60a8\u7559\u8a00\u592a\u8fc7\u9891\u7e41\uff0c1 \u5206\u949f\u540e\u518d\u6765\u7559\u8a00\u5427\uff01",1):(this.setState({isLoading:!0}),w.a.post(C.a.addMessage,{email:t,name:n,phone:s,content:i},{withCredentials:!0}).then(function(e){if(200===e.status&&0===e.data.code){a.setState({isLoading:!1}),m.a.success("\u60a8\u7684\u7559\u8a00\uff0c\u5df2\u4fdd\u5b58\u5230\u540e\u53f0\uff0c\u7ba1\u7406\u5458\u4f1a\u5c3d\u5feb\u56de\u590d\u60a8\u7684\uff01",1);var t=a.state.times+1;a.setState({cacheTime:l,times:t,email:"",name:"",phone:"",content:""})}else a.setState({isLoading:!1}),m.a.error(e.data.message,1)}).catch(function(e){a.setState({isLoading:!1}),console.error(e)}))}}},{key:"handleOk",value:function(){var e=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");this.state.email?e.test(this.state.email)?this.state.content?this.addMessage(this.state):m.a.warn("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):m.a.warn("\u8bf7\u8f93\u5165\u683c\u5f0f\u6b63\u786e\u7684\u90ae\u7bb1\uff01"):m.a.warn("\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a\uff01")}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return v.a.createElement("div",{className:"message"},v.a.createElement("div",{className:""},v.a.createElement(l.a,{style:{marginBottom:40},prefix:v.a.createElement(c.a,{type:"safety",style:{color:"rgba(0,0,0,.25)"}}),name:"email",placeholder:"\u90ae\u7bb1\uff08\u4e0d\u80fd\u4e3a\u7a7a\uff09",value:this.state.email,onChange:this.handleChange}),v.a.createElement(l.a,{style:{marginBottom:40},prefix:v.a.createElement(c.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),name:"name",placeholder:"\u540d\u5b57\uff08\u53ef\u4e3a\u7a7a\uff09",value:this.state.name,onChange:this.handleChange}),v.a.createElement(l.a,{style:{marginBottom:40},prefix:v.a.createElement(c.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),name:"phone",placeholder:"\u624b\u673a\uff08\u53ef\u4e3a\u7a7a\uff09",value:this.state.phone,onChange:this.handleChange}),v.a.createElement(l.a,{style:{marginBottom:40},prefix:v.a.createElement(c.a,{type:"message",style:{color:"rgba(0,0,0,.25)"}}),name:"content",placeholder:"\u7559\u8a00\u5185\u5bb9\uff08\u4e0d\u80fd\u4e3a\u7a7a\uff09",value:this.state.content,onChange:this.handleChange})),v.a.createElement("div",{className:"submit"},v.a.createElement(s.a,{loading:this.state.isLoading,style:{width:"100%"},type:"primary",onClick:this.handleOk},"\u63d0\u4ea4")))}}]),a}(f.Component);a.default=O}}]);